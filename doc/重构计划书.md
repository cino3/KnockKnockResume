# ğŸ“‹ Vue 3 é¡¹ç›®é‡æ„è®¡åˆ’ä¹¦

> **ç”Ÿæˆæ—¶é—´**ï¼š2026-02-08
> **é¡¹ç›®è·¯å¾„**ï¼šE:\codeProject\resume
> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0

---

## ä¸€ã€ç°çŠ¶è¯Šæ–­

### âœ… åšå¾—å¥½çš„åœ°æ–¹

1. **ä»£ç é£æ ¼ç»Ÿä¸€**
   - 100% ä½¿ç”¨ Composition API + `<script setup>`
   - æ²¡æœ‰æ··ç”¨ Vue 2 çš„ Options API
   - ä»£ç é£æ ¼ä¸€è‡´ï¼Œä¾¿äºç»´æŠ¤

2. **ç›®å½•ç»“æ„æ¸…æ™°**
   - æœ‰ `components/`, `composables/`, `stores/`, `utils/` ç­‰æ ‡å‡†ç›®å½•
   - ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹ç®¡ç†
   - ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†

3. **ç±»å‹ç³»ç»Ÿå®Œæ•´**
   - TypeScript ç±»å‹å®šä¹‰è§„èŒƒ
   - ä½¿ç”¨ interface å’Œ type å®šä¹‰æ•°æ®ç»“æ„

4. **çŠ¶æ€ç®¡ç†è§„èŒƒ**
   - ä½¿ç”¨ Pinia çŠ¶æ€ç®¡ç†
   - æ¶æ„æ¸…æ™°ï¼ŒèŒè´£æ˜ç¡®

### âš ï¸ å­˜åœ¨çš„é—®é¢˜

| é—®é¢˜ç±»å‹ | ä¸¥é‡ç¨‹åº¦ | å…·ä½“è¡¨ç° | å½±å“èŒƒå›´ |
|---------|---------|---------|---------|
| **å·¨å‹ç»„ä»¶** | ğŸ”´ ä¸¥é‡ | Sidebar.vue 785è¡Œ<br>Preview.vue 455è¡Œ<br>BoldTextarea.vue 403è¡Œ | éš¾ä»¥ç»´æŠ¤ï¼Œé€»è¾‘è€¦åˆ |
| **ä»£ç é‡å¤** | ğŸ”´ ä¸¥é‡ | å¤´åƒä¸Šä¼ é€»è¾‘é‡å¤ 2 æ¬¡<br>å¯¼å‡ºåŠŸèƒ½é‡å¤ 2 æ¬¡<br>é‡ç½®åŠŸèƒ½é‡å¤ 2 æ¬¡ | ç»´æŠ¤æˆæœ¬ç¿»å€ |
| **æ ·å¼å†…è”** | ğŸŸ¡ ä¸­ç­‰ | ç»„ä»¶ä¸­åŒ…å« 400+ è¡Œæ ·å¼ä»£ç  | ç»„ä»¶è‡ƒè‚¿ï¼Œéš¾å¤ç”¨ |
| **å®‰å…¨éšæ‚£** | ğŸŸ¡ ä¸­ç­‰ | ä½¿ç”¨ v-html æ¸²æŸ“å¯Œæ–‡æœ¬ | XSS æ”»å‡»é£é™© |
| **ç¼ºå°‘æµ‹è¯•** | ğŸŸ¡ ä¸­ç­‰ | æ— ä»»ä½•å•å…ƒæµ‹è¯• | é‡æ„é£é™©é«˜ |

---

## äºŒã€ç»„ä»¶è¡Œæ•°ç»Ÿè®¡

### ğŸ“Š å½“å‰ç»„ä»¶è§„æ¨¡åˆ†æ

| ç»„ä»¶è·¯å¾„ | è¡Œæ•° | ç±»å‹ | ä¼˜å…ˆçº§ |
|---------|------|------|--------|
| `src/components/Sidebar.vue` | **785** | ğŸ”´ å·¨å‹ | â­â­â­â­â­ |
| `src/components/Preview.vue` | **455** | ğŸ”´ å·¨å‹ | â­â­â­â­ |
| `src/components/editor/BoldTextarea.vue` | **403** | ğŸŸ¡ å¤§å‹ | â­â­â­â­ |
| `src/components/Editor.vue` | **311** | ğŸŸ¡ å¤§å‹ | â­â­â­ |
| `src/components/ResumeContent.vue` | 249 | ğŸŸ¢ ä¸­å‹ | â­â­ |
| `src/components/editor/ExperienceList.vue` | 105 | ğŸŸ¢ ä¸­å‹ | - |
| `src/components/editor/ProjectList.vue` | 105 | ğŸŸ¢ ä¸­å‹ | - |
| `src/components/editor/EducationList.vue` | 100 | ğŸŸ¢ ä¸­å‹ | - |
| `src/components/App.vue` | 35 | ğŸŸ¢ å°å‹ | - |

---

## ä¸‰ã€é‡æ„è·¯çº¿å›¾

### ğŸ”¥ **é˜¶æ®µä¸€ï¼šåŸºç¡€é‡æ„ï¼ˆé¢„è®¡1-2å‘¨ï¼‰**

> **ç›®æ ‡**ï¼šæ¶ˆé™¤ä»£ç é‡å¤ï¼Œå»ºç«‹è§„èŒƒåŸºç¡€
> **é£é™©**ï¼šä½
> **æ”¶ç›Š**ï¼šé«˜

#### æ­¥éª¤ 1ï¼šæå–é‡å¤é€»è¾‘åˆ° Composables

**ä¼˜å…ˆçº§**ï¼šâ­â­â­â­â­

| å¾…æå–åŠŸèƒ½ | æºæ–‡ä»¶ | ä»£ç ä½ç½® | ç›®æ ‡æ–‡ä»¶ |
|-----------|--------|---------|---------|
| å¤´åƒä¸Šä¼ é€»è¾‘ | Sidebar.vue<br>Editor.vue | :453-486<br>:215-248 | `src/composables/useAvatarUpload.ts` |
| å¯¼å‡ºåŠŸèƒ½ | Sidebar.vue<br>Editor.vue | :326-345<br>:250-269 | `src/composables/useExportActions.ts` |
| é‡ç½®åŠŸèƒ½ | Sidebar.vue<br>Editor.vue | :347-360<br>:271-284 | åˆå¹¶åˆ°ä¸Šé¢çš„ composable |
| æ‰“å°åŠŸèƒ½ | Preview.vue<br>å…¶ä»–ç»„ä»¶ | å¤šå¤„ | å·²æœ‰ `usePrint.ts`ï¼Œéœ€ç»Ÿä¸€ä½¿ç”¨ |

**æ”¶ç›Š**ï¼šå‡å°‘ ~200 è¡Œé‡å¤ä»£ç 

**å®ç°ç¤ºä¾‹**ï¼š

```typescript
// src/composables/useAvatarUpload.ts
import { ref } from 'vue'
import { useResumeStore } from '@/stores/resume'

export function useAvatarUpload() {
  const store = useResumeStore()
  const avatarInput = ref<HTMLInputElement | null>(null)

  const triggerFileInput = () => {
    avatarInput.value?.click()
  }

  const handleAvatarChange = async (event: Event) => {
    const target = event.target as HTMLInputElement
    const file = target.files?.[0]
    if (!file) return

    // éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°
    if (!file.type.startsWith('image/')) {
      alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶')
      return
    }

    if (file.size > 5 * 1024 * 1024) {
      alert('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MB')
      return
    }

    // è¯»å–å¹¶ä¿å­˜å¤´åƒ
    const reader = new FileReader()
    reader.onload = (e) => {
      store.updateAvatar(e.target?.result as string)
    }
    reader.readAsDataURL(file)
  }

  const handleRemoveAvatar = () => {
    store.updateAvatar('')
  }

  return {
    avatarInput,
    triggerFileInput,
    handleAvatarChange,
    handleRemoveAvatar
  }
}
```

```typescript
// src/composables/useExportActions.ts
import { useResumeStore } from '@/stores/resume'

export function useExportActions() {
  const store = useResumeStore()
  const router = useRouter()

  const handleSave = () => {
    const data = JSON.stringify(store.resumeData, null, 2)
    const blob = new Blob([data], { type: 'application/json' })
    const url = URL.createObjectURL(blob)
    const a = document.createElement('a')
    a.href = url
    a.download = `${store.resumeFileName || 'resume'}.json`
    a.click()
    URL.revokeObjectURL(url)
  }

  const handleExportJSON = () => {
    handleSave()
  }

  const handleReset = () => {
    if (confirm('ç¡®å®šè¦é‡ç½®ç®€å†æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
      store.$reset()
      router.push('/')
    }
  }

  return {
    handleSave,
    handleExportJSON,
    handleReset
  }
}
```

---

#### æ­¥éª¤ 2ï¼šæ‹†åˆ† Sidebar.vueï¼ˆ785è¡Œ â†’ 3ä¸ªç»„ä»¶ï¼‰

**ä¼˜å…ˆçº§**ï¼šâ­â­â­â­â­

**å½“å‰é—®é¢˜**ï¼š
- 785 è¡Œä»£ç æ··åœ¨ä¸€èµ·
- åŒ…å« 400+ è¡Œæ ·å¼ä»£ç 
- é€»è¾‘å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤

**æ‹†åˆ†æ–¹æ¡ˆ**ï¼š

```
src/components/Sidebar.vue (785è¡Œ)
â”œâ”€â”€ æ‹†åˆ†ä¸ºï¼š
â”‚   â”œâ”€â”€ src/components/sidebar/SidebarMain.vue        (ä¸»å®¹å™¨, ~100è¡Œ)
â”‚   â”œâ”€â”€ src/components/sidebar/SidebarActions.vue     (æ“ä½œæŒ‰é’®åŒº, ~150è¡Œ)
â”‚   â”œâ”€â”€ src/components/sidebar/SidebarForms.vue       (è¡¨å•åŒº, ~200è¡Œ)
â”‚   â””â”€â”€ src/styles/sidebar.scss                       (æ ·å¼, ~400è¡Œ)
```

**é‡æ„åçš„ Sidebar.vue åº”è¯¥åªæœ‰**ï¼š

```vue
<template>
  <aside class="sidebar">
    <SidebarMain />
  </aside>
</template>

<script setup lang="ts">
import SidebarMain from './sidebar/SidebarMain.vue'
</script>

<style scoped>
@import '@/styles/sidebar.scss';
</style>
```

**å­ç»„ä»¶èŒè´£åˆ’åˆ†**ï¼š

| ç»„ä»¶ | èŒè´£ | åŒ…å«åŠŸèƒ½ |
|------|------|---------|
| `SidebarMain.vue` | ä¸»å®¹å™¨ | æ•´ä½“å¸ƒå±€ã€ç»„ä»¶ç»„è£… |
| `SidebarActions.vue` | æ“ä½œæŒ‰é’® | å¯¼å‡ºã€é‡ç½®ã€é¢„è§ˆç­‰ |
| `SidebarForms.vue` | è¡¨å•åŒºåŸŸ | åŸºæœ¬ä¿¡æ¯ç¼–è¾‘è¡¨å• |

---

#### æ­¥éª¤ 3ï¼šæ‹†åˆ† Preview.vueï¼ˆ455è¡Œ â†’ ç»„ä»¶+Composableï¼‰

**ä¼˜å…ˆçº§**ï¼šâ­â­â­â­

**å½“å‰é—®é¢˜**ï¼š
- 455 è¡Œä»£ç 
- åŒ…å«å¤æ‚çš„åˆ†é¡µç®—æ³•ï¼ˆ~150 è¡Œï¼‰
- UI å’Œä¸šåŠ¡é€»è¾‘è€¦åˆ

**æ‹†åˆ†æ–¹æ¡ˆ**ï¼š

```
src/components/Preview.vue (455è¡Œ)
â”œâ”€â”€ æå–åˆ†é¡µé€»è¾‘ â†’ src/composables/usePagination.ts (~150è¡Œ)
â”œâ”€â”€ æ‹†åˆ†ä¸ºï¼š
â”‚   â”œâ”€â”€ src/components/preview/PreviewCanvas.vue    (ç”»å¸ƒ, ~150è¡Œ)
â”‚   â”œâ”€â”€ src/components/preview/PreviewControls.vue  (æ§åˆ¶æ , ~80è¡Œ)
â”‚   â””â”€â”€ src/components/preview/PreviewPage.vue      (å•é¡µ, ~100è¡Œ)
```

**æ ¸å¿ƒæ”¹è¿›**ï¼šå°†åˆ†é¡µç®—æ³•ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰ä» UI ä¸­åˆ†ç¦»å‡ºæ¥

**å®ç°ç¤ºä¾‹**ï¼š

```typescript
// src/composables/usePagination.ts
import { ref, computed } from 'vue'

interface PaginationOptions {
  contentHeight: number
  pageHeight: number
  margin: number
}

export function usePagination(options: PaginationOptions) {
  const { contentHeight, pageHeight, margin } = options

  const pages = ref<Array<{ startY: number; endY: number }>([])

  const calculatePages = () => {
    // åˆ†é¡µç®—æ³•å®ç°
    const availableHeight = pageHeight - margin * 2
    const totalPages = Math.ceil(contentHeight / availableHeight)

    pages.value = Array.from({ length: totalPages }, (_, i) => ({
      startY: i * availableHeight,
      endY: (i + 1) * availableHeight
    }))
  }

  const totalPages = computed(() => pages.value.length)

  return {
    pages,
    totalPages,
    calculatePages
  }
}
```

---

### ğŸš€ **é˜¶æ®µäºŒï¼šç»„ä»¶ä¼˜åŒ–ï¼ˆé¢„è®¡1-2å‘¨ï¼‰**

> **ç›®æ ‡**ï¼šæ‹†åˆ†å‰©ä½™å¤§ç»„ä»¶ï¼Œæé«˜å¯ç»´æŠ¤æ€§
> **é£é™©**ï¼šä¸­ç­‰
> **æ”¶ç›Š**ï¼šé«˜

#### æ­¥éª¤ 4ï¼šæ‹†åˆ† BoldTextarea.vueï¼ˆ403è¡Œ â†’ 4ä¸ªå­ç»„ä»¶ï¼‰

**ä¼˜å…ˆçº§**ï¼šâ­â­â­â­

**å½“å‰é—®é¢˜**ï¼š
- 403 è¡Œä»£ç 
- åŒ…å«ç¼–è¾‘å™¨ã€å·¥å…·æ ã€èœå•ç­‰å¤šä¸ªåŠŸèƒ½
- èŒè´£ä¸æ¸…æ™°

**æ‹†åˆ†æ–¹æ¡ˆ**ï¼š

```
src/components/editor/BoldTextarea.vue (403è¡Œ)
â”œâ”€â”€ æ‹†åˆ†ä¸ºï¼š
â”‚   â”œâ”€â”€ src/components/editor/TextEditor.vue           (åŸºç¡€ç¼–è¾‘å™¨, ~120è¡Œ)
â”‚   â”œâ”€â”€ src/components/editor/EditorToolbar.vue        (å·¥å…·æ , ~100è¡Œ)
â”‚   â”œâ”€â”€ src/components/editor/EditorMenu.vue           (èœå•, ~80è¡Œ)
â”‚   â””â”€â”€ src/composables/useTextFormatting.ts          (æ ¼å¼åŒ–é€»è¾‘, ~100è¡Œ)
```

**å­ç»„ä»¶èŒè´£åˆ’åˆ†**ï¼š

| ç»„ä»¶ | èŒè´£ | åŒ…å«åŠŸèƒ½ |
|------|------|---------|
| `TextEditor.vue` | æ–‡æœ¬ç¼–è¾‘ | æ–‡æœ¬è¾“å…¥ã€å…‰æ ‡å¤„ç† |
| `EditorToolbar.vue` | å·¥å…·æ  | ç²—ä½“ã€æ–œä½“ã€åˆ—è¡¨ç­‰æŒ‰é’® |
| `EditorMenu.vue` | èœå• | æ›´å¤šæ ¼å¼åŒ–é€‰é¡¹ |
| `useTextFormatting.ts` | æ ¼å¼åŒ–é€»è¾‘ | åŠ ç²—ã€æ–œä½“ç­‰æ“ä½œ |

---

#### æ­¥éª¤ 5ï¼šç§»é™¤ v-htmlï¼Œä½¿ç”¨å®‰å…¨çš„å¯Œæ–‡æœ¬æ¸²æŸ“

**ä¼˜å…ˆçº§**ï¼šâ­â­â­â­

**å½“å‰é—®é¢˜**ï¼š

```vue
<!-- src/components/ResumeContent.vue:68-72 -->
<div v-html="line"></div> <!-- XSS é£é™© -->
```

**æ”¹è¿›æ–¹æ¡ˆ Aï¼ˆæ¨èï¼‰**ï¼šä½¿ç”¨ DOMPurify

```bash
npm install dompurify
npm install -D @types/dompurify
```

```typescript
// src/composables/useSafeHtml.ts
import DOMPurify from 'dompurify'

export function useSafeHtml() {
  const sanitize = (html: string) => {
    return DOMPurify.sanitize(html, {
      ALLOWED_TAGS: ['b', 'i', 'u', 'strong', 'em', 'p', 'br', 'ul', 'ol', 'li'],
      ALLOWED_ATTR: []
    })
  }

  return { sanitize }
}
```

```vue
<!-- ä½¿ç”¨ç¤ºä¾‹ -->
<script setup lang="ts">
import { useSafeHtml } from '@/composables/useSafeHtml'

const { sanitize } = useSafeHtml()
</script>

<template>
  <div v-html="sanitize(line)"></div>
</template>
```

**æ”¹è¿›æ–¹æ¡ˆ B**ï¼šä½¿ç”¨ Markdown æ¸²æŸ“

```bash
npm install markdown-it
```

```typescript
// src/composables/useMarkdown.ts
import MarkdownIt from 'markdown-it'

const md = new MarkdownIt()

export function useMarkdown() {
  const render = (markdown: string) => {
    return md.render(markdown)
  }

  return { render }
}
```

---

### ğŸ—ï¸ **é˜¶æ®µä¸‰ï¼šæ¶æ„ä¼˜åŒ–ï¼ˆé¢„è®¡1å‘¨ï¼‰**

> **ç›®æ ‡**ï¼šå»ºç«‹é•¿æœŸå¯ç»´æŠ¤çš„æ¶æ„
> **é£é™©**ï¼šä½
> **æ”¶ç›Š**ï¼šä¸­

#### æ­¥éª¤ 6ï¼šå»ºç«‹ç»Ÿä¸€çš„æ ·å¼ç®¡ç†

**ä¼˜å…ˆçº§**ï¼šâ­â­â­

**å½“å‰é—®é¢˜**ï¼š
- æ ·å¼ä»£ç æ•£è½åœ¨ç»„ä»¶ä¸­
- éš¾ä»¥å¤ç”¨å’Œç»´æŠ¤
- æ²¡æœ‰ç»Ÿä¸€çš„è®¾è®¡å˜é‡

**æ”¹è¿›æ–¹æ¡ˆ**ï¼š

```
src/styles/
â”œâ”€â”€ main.scss           (å…¨å±€æ ·å¼å…¥å£)
â”œâ”€â”€ variables.scss      (å˜é‡ï¼šé¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰)
â”œâ”€â”€ mixins.scss         (æ··å…¥ï¼šå“åº”å¼ã€åŠ¨ç”»ç­‰)
â”œâ”€â”€ sidebar.scss        (ä¾§è¾¹æ æ ·å¼)
â”œâ”€â”€ preview.scss        (é¢„è§ˆåŒºæ ·å¼)
â”œâ”€â”€ editor.scss         (ç¼–è¾‘åŒºæ ·å¼)
â””â”€â”€ resume.scss         (ç®€å†æ ·å¼)
```

**variables.scss ç¤ºä¾‹**ï¼š

```scss
// src/styles/variables.scss

// é¢œè‰²ç³»ç»Ÿ
$primary-color: #3b82f6;
$success-color: #10b981;
$danger-color: #ef4444;
$warning-color: #f59e0b;

// å­—ä½“
$font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
$font-size-base: 14px;
$font-size-large: 16px;
$font-size-small: 12px;

// é—´è·
$spacing-xs: 4px;
$spacing-sm: 8px;
$spacing-md: 16px;
$spacing-lg: 24px;
$spacing-xl: 32px;

// è¾¹æ¡†
$border-radius: 4px;
$border-color: #e5e7eb;

// é˜´å½±
$shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
$shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
$shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
```

**main.scss ç¤ºä¾‹**ï¼š

```scss
// src/styles/main.scss

@import './variables.scss';
@import './mixins.scss';

// å…¨å±€æ ·å¼
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: $font-family-base;
  font-size: $font-size-base;
  line-height: 1.5;
  color: #1f2937;
}
```

**åœ¨ main.ts ä¸­å…¨å±€å¼•å…¥**ï¼š

```typescript
// src/main.ts
import './styles/main.scss'
```

---

#### æ­¥éª¤ 7ï¼šä¼˜åŒ–ç›®å½•ç»“æ„

**ä¼˜å…ˆçº§**ï¼šâ­â­â­

**å½“å‰ç»“æ„**ï¼š

```
src/
â”œâ”€â”€ assets/             (âŒ ç¼ºå¤±)
â”œâ”€â”€ components/         (âœ… æœ‰)
â”‚   â”œâ”€â”€ editor/         (âœ… æœ‰)
â”‚   â”œâ”€â”€ sidebar/        (âŒ ç¼ºå¤±)
â”‚   â””â”€â”€ preview/        (âŒ ç¼ºå¤±)
â”œâ”€â”€ composables/        (âœ… æœ‰)
â”œâ”€â”€ stores/             (âœ… æœ‰)
â”œâ”€â”€ types/              (âœ… æœ‰)
â”œâ”€â”€ utils/              (âœ… æœ‰)
â”œâ”€â”€ styles/             (âœ… æœ‰)
â””â”€â”€ views/              (âŒ ç¼ºå¤±)
```

**ä¼˜åŒ–åç»“æ„**ï¼š

```
src/
â”œâ”€â”€ assets/             (âœ… æ–°å»º)
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ default-avatar.png
â”‚   â””â”€â”€ fonts/
â”œâ”€â”€ components/         (âœ… ä¼˜åŒ–)
â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â”œâ”€â”€ BoldTextarea.vue
â”‚   â”‚   â”œâ”€â”€ ExperienceList.vue
â”‚   â”‚   â”œâ”€â”€ ProjectList.vue
â”‚   â”‚   â”œâ”€â”€ EducationList.vue
â”‚   â”‚   â”œâ”€â”€ AwardList.vue
â”‚   â”‚   â”œâ”€â”€ SelfEvaluationEditor.vue
â”‚   â”‚   â”œâ”€â”€ TextEditor.vue           (æ–°å»º)
â”‚   â”‚   â”œâ”€â”€ EditorToolbar.vue        (æ–°å»º)
â”‚   â”‚   â””â”€â”€ EditorMenu.vue           (æ–°å»º)
â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”œâ”€â”€ Sidebar.vue              (é‡æ„)
â”‚   â”‚   â”œâ”€â”€ SidebarMain.vue          (æ–°å»º)
â”‚   â”‚   â”œâ”€â”€ SidebarActions.vue       (æ–°å»º)
â”‚   â”‚   â””â”€â”€ SidebarForms.vue         (æ–°å»º)
â”‚   â”œâ”€â”€ preview/
â”‚   â”‚   â”œâ”€â”€ Preview.vue              (é‡æ„)
â”‚   â”‚   â”œâ”€â”€ PreviewCanvas.vue        (æ–°å»º)
â”‚   â”‚   â”œâ”€â”€ PreviewControls.vue      (æ–°å»º)
â”‚   â”‚   â””â”€â”€ PreviewPage.vue          (æ–°å»º)
â”‚   â”œâ”€â”€ Editor.vue                   (é‡æ„)
â”‚   â”œâ”€â”€ ResumeContent.vue
â”‚   â””â”€â”€ App.vue
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useAvatarUpload.ts           (æ–°å»º)
â”‚   â”œâ”€â”€ useExportActions.ts          (æ–°å»º)
â”‚   â”œâ”€â”€ usePagination.ts             (æ–°å»º)
â”‚   â”œâ”€â”€ useTextFormatting.ts         (æ–°å»º)
â”‚   â”œâ”€â”€ useSafeHtml.ts               (æ–°å»º)
â”‚   â””â”€â”€ usePrint.ts                  (å·²æœ‰ï¼Œéœ€ç»Ÿä¸€)
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ resume.ts
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ format.ts
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ main.scss
â”‚   â”œâ”€â”€ variables.scss
â”‚   â”œâ”€â”€ mixins.scss
â”‚   â”œâ”€â”€ sidebar.scss
â”‚   â”œâ”€â”€ preview.scss
â”‚   â”œâ”€â”€ editor.scss
â”‚   â””â”€â”€ resume.scss
â””â”€â”€ main.ts
```

---

#### æ­¥éª¤ 8ï¼šæ·»åŠ é”™è¯¯è¾¹ç•Œå’ŒåŠ è½½çŠ¶æ€

**ä¼˜å…ˆçº§**ï¼šâ­â­

**å®ç°ç¤ºä¾‹**ï¼š

```typescript
// src/composables/useErrorBoundary.ts
import { ref } from 'vue'

export function useErrorBoundary() {
  const error = ref<Error | null>(null)
  const isLoading = ref(false)

  const handleError = (err: Error) => {
    error.value = err
    console.error('Application error:', err)
    // å¯ä»¥åœ¨è¿™é‡Œä¸ŠæŠ¥é”™è¯¯åˆ°ç›‘æ§æœåŠ¡
  }

  const clearError = () => {
    error.value = null
  }

  const withErrorHandling = async (fn: () => Promise<void>) => {
    isLoading.value = true
    try {
      await fn()
    } catch (err) {
      handleError(err as Error)
    } finally {
      isLoading.value = false
    }
  }

  return {
    error,
    isLoading,
    handleError,
    clearError,
    withErrorHandling
  }
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```vue
<script setup lang="ts">
import { useErrorBoundary } from '@/composables/useErrorBoundary'

const { error, isLoading, withErrorHandling } = useErrorBoundary()

const handleSave = async () => {
  await withErrorHandling(async () => {
    // ä¿å­˜é€»è¾‘
  })
}
</script>

<template>
  <div v-if="isLoading">åŠ è½½ä¸­...</div>
  <div v-if="error" class="error">
    {{ error.message }}
  </div>
</template>
```

---

### âœ… **é˜¶æ®µå››ï¼šè´¨é‡ä¿éšœï¼ˆæŒç»­ï¼‰**

#### æ­¥éª¤ 9ï¼šæ·»åŠ å•å…ƒæµ‹è¯•

**ä¼˜å…ˆçº§**ï¼šâ­â­â­

**å®‰è£…ä¾èµ–**ï¼š

```bash
npm install -D vitest @vue/test-utils jsdom @vitest/ui
```

**é…ç½® vitest**ï¼š

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  test: {
    globals: true,
    environment: 'jsdom'
  }
})
```

**æµ‹è¯•ç¤ºä¾‹**ï¼š

```typescript
// tests/components/Sidebar.spec.ts
import { describe, it, expect, beforeEach } from 'vitest'
import { mount } from '@vue/test-utils'
import { createPinia } from 'pinia'
import Sidebar from '@/components/Sidebar.vue'

describe('Sidebar', () => {
  let wrapper: any

  beforeEach(() => {
    const pinia = createPinia()
    wrapper = mount(Sidebar, {
      global: {
        plugins: [pinia]
      }
    })
  })

  it('renders correctly', () => {
    expect(wrapper.find('.sidebar').exists()).toBe(true)
  })

  it('exports resume data when clicking export button', async () => {
    const exportSpy = vi.fn()
    wrapper.vm.handleExportJSON = exportSpy

    await wrapper.find('.export-btn').trigger('click')
    expect(exportSpy).toHaveBeenCalled()
  })

  it('resets resume data after confirmation', async () => {
    const confirmSpy = vi.spyOn(window, 'confirm').mockReturnValue(true)
    const resetSpy = vi.fn()

    wrapper.vm.handleReset = resetSpy

    await wrapper.find('.reset-btn').trigger('click')
    expect(confirmSpy).toHaveBeenCalledWith('ç¡®å®šè¦é‡ç½®ç®€å†æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')
    expect(resetSpy).toHaveBeenCalled()
  })
})
```

**æ›´æ–° package.json**ï¼š

```json
{
  "scripts": {
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage"
  }
}
```

---

## å››ã€é‡æ„ä¼˜å…ˆçº§çŸ©é˜µ

```
é«˜å½±å“ â”‚ â‘  æå–é‡å¤ä»£ç        â‘£ æ‹†åˆ†BoldTextarea
      â”‚ â‘¡ æ‹†åˆ†Sidebar        â‘¤ ç§»é™¤v-html
      â”‚ â‘¢ æ‹†åˆ†Preview
â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä½å½±å“ â”‚ â‘¥ ç»Ÿä¸€æ ·å¼ç®¡ç†       â‘¨ æ·»åŠ æµ‹è¯•
      â”‚ â‘¦ ä¼˜åŒ–ç›®å½•ç»“æ„       â‘© é”™è¯¯è¾¹ç•Œ
      â”‚ â‘§ æŒ‰éœ€åŠ è½½
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
         ä½éš¾åº¦                              é«˜éš¾åº¦
```

**å»ºè®®æ‰§è¡Œé¡ºåº**ï¼š
1. â‘  â†’ â‘¡ â†’ â‘¢ ï¼ˆåŸºç¡€é‡æ„ï¼Œå¿…é¡»å®Œæˆï¼‰
2. â‘£ â†’ â‘¤ â†’ â‘¥ ï¼ˆç»„ä»¶ä¼˜åŒ–ï¼Œé‡è¦æ”¹è¿›ï¼‰
3. â‘¦ â†’ â‘¨ â†’ â‘§ â†’ â‘© ï¼ˆæ¶æ„ä¼˜åŒ–ï¼Œé•¿æœŸæ”¶ç›Šï¼‰

---

## äº”ã€é‡æ„æ£€æŸ¥æ¸…å•

### âœ… æ¯æ¬¡é‡æ„å‰æ£€æŸ¥
- [ ] åˆ›å»ºæ–°åˆ†æ”¯ `refactor/xxx`
- [ ] è¿è¡Œç°æœ‰æµ‹è¯•ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] å¤‡ä»½å½“å‰å·¥ä½œçŠ¶æ€
- [ ] é˜…è¯»ç›¸å…³ä»£ç ï¼Œç†è§£ç°æœ‰é€»è¾‘

### âœ… æ¯æ¬¡é‡æ„åæ£€æŸ¥
- [ ] åŠŸèƒ½æ­£å¸¸è¿è¡Œ
- [ ] æ²¡æœ‰æ§åˆ¶å°é”™è¯¯
- [ ] ä»£ç è¡Œæ•°å‡å°‘
- [ ] ç»„ä»¶èŒè´£æ›´æ¸…æ™°
- [ ] æäº¤ä¿¡æ¯è§„èŒƒ

### ğŸ“ Git æäº¤è§„èŒƒ
```bash
# æå–é‡å¤ä»£ç 
git commit -m "refactor: extract avatar upload logic to useAvatarUpload composable"

# æ‹†åˆ†ç»„ä»¶
git commit -m "refactor: split Sidebar into multiple sub-components"

# ç§»é™¤ v-html
git commit -m "security: replace v-html with DOMPurify sanitizer"

# ç»Ÿä¸€æ ·å¼
git commit -m "style: extract styles to separate SCSS files"
```

---

## å…­ã€é¢„æœŸæ”¶ç›Š

| æŒ‡æ ‡ | å½“å‰ | é‡æ„å | æ”¹è¿›å¹…åº¦ |
|-----|------|--------|---------|
| æœ€å¤§ç»„ä»¶è¡Œæ•° | 785è¡Œ | ~200è¡Œ | â†“ 74% |
| ä»£ç é‡å¤ç‡ | ~15% | ~3% | â†“ 80% |
| æ ·å¼ä»£ç ä½ç½® | ç»„ä»¶å†… | ç‹¬ç«‹æ–‡ä»¶ | âœ… è§„èŒƒåŒ– |
| ç»„åˆå¼å‡½æ•°æ•°é‡ | 3ä¸ª | 10+ | â†‘ 233% |
| æµ‹è¯•è¦†ç›–ç‡ | 0% | 60%+ | â†‘ âˆ |
| XSS å®‰å…¨é£é™© | å­˜åœ¨ | å·²æ¶ˆé™¤ | âœ… å®‰å…¨ |
| ç»„ä»¶èŒè´£æ¸…æ™°åº¦ | ä½ | é«˜ | â†‘ æ˜¾è‘— |

---

## ä¸ƒã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

### ğŸ¯ **ç¬¬ä¸€å‘¨ä»»åŠ¡**ï¼ˆæ¨èä»è¿™é‡Œå¼€å§‹ï¼‰

1. **æå–é‡å¤ä»£ç åˆ° composables**
   - é£é™©ä½ï¼Œæ”¶ç›Šé«˜
   - ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½
   - èƒ½ç«‹å³å‡å°‘ ~200 è¡Œä»£ç 
   - **é¢„è®¡æ—¶é—´**ï¼š2-3 å¤©

2. **å°† Sidebar.vue çš„æ ·å¼ç§»åˆ°ç‹¬ç«‹æ–‡ä»¶**
   - ç®€å•ä¸”å®‰å…¨
   - è®©ç»„ä»¶ä»£ç æ›´æ¸…æ™°
   - **é¢„è®¡æ—¶é—´**ï¼šåŠå¤©

### ğŸ¯ **ç¬¬äºŒå‘¨ä»»åŠ¡**

3. **æ‹†åˆ† Sidebar.vue**
   - å…ˆæ‹†æ ·å¼ï¼Œå†æ‹†é€»è¾‘
   - ä¸€æ¬¡æ‹†ä¸€ä¸ªå­ç»„ä»¶ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸
   - **é¢„è®¡æ—¶é—´**ï¼š3-4 å¤©

4. **æ‹†åˆ† Preview.vue**
   - é‡ç‚¹æå–åˆ†é¡µç®—æ³•
   - **é¢„è®¡æ—¶é—´**ï¼š2-3 å¤©

### ğŸ¯ **ç¬¬ä¸‰å‘¨ä»»åŠ¡**

5. **æ‹†åˆ† BoldTextarea.vue**
6. **ç§»é™¤ v-htmlï¼Œä½¿ç”¨ DOMPurify**
7. **ç»Ÿä¸€æ ·å¼ç®¡ç†**

### ğŸ¯ **ç¬¬å››å‘¨åŠä»¥å**

8. **ä¼˜åŒ–ç›®å½•ç»“æ„**
9. **æ·»åŠ å•å…ƒæµ‹è¯•**
10. **æ·»åŠ é”™è¯¯è¾¹ç•Œ**

---

## å…«ã€é‡æ„åŸåˆ™

### SOLID åŸåˆ™åœ¨ Vue 3 ä¸­çš„åº”ç”¨

**S - å•ä¸€èŒè´£åŸåˆ™**
- æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹
- å¦‚æœç»„ä»¶è¶…è¿‡ 300 è¡Œï¼Œè€ƒè™‘æ‹†åˆ†

**O - å¼€é—­åŸåˆ™**
- é€šè¿‡ props å’Œ events æ‰©å±•ç»„ä»¶åŠŸèƒ½
- é¿å…ä¿®æ”¹ç°æœ‰ç»„ä»¶ï¼Œæ–°å¢å­ç»„ä»¶

**L - é‡Œæ°æ›¿æ¢åŸåˆ™**
- å­ç»„ä»¶å¯ä»¥æ›¿æ¢çˆ¶ç»„ä»¶ä½¿ç”¨
- ä¿æŒç»„ä»¶æ¥å£ä¸€è‡´

**I - æ¥å£éš”ç¦»åŸåˆ™**
- Props åº”è¯¥ç²¾ç®€ï¼Œä¸è¦ä¼ é€’ä¸éœ€è¦çš„æ•°æ®
- ä½¿ç”¨ TypeScript ç±»å‹çº¦æŸ

**D - ä¾èµ–å€’ç½®åŸåˆ™**
- ä¾èµ– composables è€Œéå…·ä½“å®ç°
- ä¾èµ–æŠ½è±¡ï¼ˆæ¥å£ã€ç±»å‹ï¼‰è€Œéå…·ä½“ç»†èŠ‚

### KISS åŸåˆ™ï¼ˆKeep It Simple, Stupidï¼‰
- ä¿æŒä»£ç ç®€å•æ˜“æ‡‚
- é¿å…è¿‡åº¦è®¾è®¡
- ä¼˜å…ˆé€‰æ‹©æœ€ç›´è§‚çš„è§£å†³æ–¹æ¡ˆ

### DRY åŸåˆ™ï¼ˆDon't Repeat Yourselfï¼‰
- è‡ªåŠ¨è¯†åˆ«é‡å¤ä»£ç æ¨¡å¼
- æå–åˆ° composables æˆ– utils
- ç»Ÿä¸€ç›¸ä¼¼åŠŸèƒ½çš„å®ç°æ–¹å¼

### YAGNI åŸåˆ™ï¼ˆYou Aren't Gonna Need Itï¼‰
- åªå®ç°å½“å‰éœ€è¦çš„åŠŸèƒ½
- ä¸ä¸ºæœªæ¥å¯èƒ½çš„éœ€æ±‚é¢„ç•™ä»£ç 
- åˆ é™¤æœªä½¿ç”¨çš„ä»£ç å’Œä¾èµ–

---

## ä¹ã€å¸¸è§é—®é¢˜ FAQ

### Q1: é‡æ„ä¼šç ´åç°æœ‰åŠŸèƒ½å—ï¼Ÿ
**A**: å¦‚æœæŒ‰ç…§é‡æ„è®¡åˆ’é€æ­¥è¿›è¡Œï¼Œæ¯ä¸ªæ­¥éª¤éƒ½è¿›è¡Œæµ‹è¯•ï¼Œé£é™©å¾ˆä½ã€‚å»ºè®®ï¼š
- æ¯æ¬¡é‡æ„å‰åˆ›å»ºæ–°åˆ†æ”¯
- æ¯æ¬¡é‡æ„åè¿è¡Œåº”ç”¨æµ‹è¯•åŠŸèƒ½
- ä½¿ç”¨ Git ç‰ˆæœ¬æ§åˆ¶ï¼Œéšæ—¶å¯ä»¥å›æ»š

### Q2: é‡æ„éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
**A**:
- ç¬¬ä¸€é˜¶æ®µï¼ˆåŸºç¡€é‡æ„ï¼‰ï¼š1-2 å‘¨
- ç¬¬äºŒé˜¶æ®µï¼ˆç»„ä»¶ä¼˜åŒ–ï¼‰ï¼š1-2 å‘¨
- ç¬¬ä¸‰é˜¶æ®µï¼ˆæ¶æ„ä¼˜åŒ–ï¼‰ï¼š1 å‘¨
- ç¬¬å››é˜¶æ®µï¼ˆè´¨é‡ä¿éšœï¼‰ï¼šæŒç»­è¿›è¡Œ

**æ€»è®¡**ï¼š4-6 å‘¨å®Œæˆæ ¸å¿ƒé‡æ„

### Q3: æˆ‘æ˜¯åˆå­¦è€…ï¼Œèƒ½å®Œæˆé‡æ„å—ï¼Ÿ
**A**: å¯ä»¥ï¼è¿™ä¸ªè®¡åˆ’æ˜¯æŒ‰ç…§éš¾åº¦é€’è¿›è®¾è®¡çš„ï¼š
- ä»ç®€å•çš„æå–ä»£ç å¼€å§‹
- é€æ­¥æ‹†åˆ†ç»„ä»¶
- æ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†ç¤ºä¾‹
- é‡åˆ°é—®é¢˜å¯ä»¥éšæ—¶è¯¢é—® AI

### Q4: é‡æ„è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ
**A**:
1. ä½¿ç”¨ `git stash` ä¿å­˜å½“å‰å·¥ä½œ
2. å›åˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬ï¼š`git reset --hard HEAD`
3. åˆ†æé—®é¢˜åŸå› 
4. é‡æ–°è¿›è¡Œé‡æ„
5. æˆ–è€…è·³è¿‡å½“å‰æ­¥éª¤ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥

### Q5: å¿…é¡»æŒ‰é¡ºåºå®Œæˆæ‰€æœ‰æ­¥éª¤å—ï¼Ÿ
**A**: ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å»ºè®®ï¼š
- **å¿…é¡»å®Œæˆ**ï¼šæ­¥éª¤ 1ã€2ã€3ï¼ˆåŸºç¡€é‡æ„ï¼‰
- **å¼ºçƒˆå»ºè®®**ï¼šæ­¥éª¤ 4ã€5ï¼ˆç»„ä»¶ä¼˜åŒ–ï¼‰
- **å¯é€‰**ï¼šæ­¥éª¤ 6ã€7ã€8ã€9ã€10ï¼ˆæ¶æ„ä¼˜åŒ–ï¼‰

---

## åã€æ€»ç»“

ä½ çš„ Vue 3 é¡¹ç›®**åŸºç¡€ä¸é”™**ï¼Œä¸»è¦é—®é¢˜æ˜¯ï¼š
1. âœ… ä»£ç é£æ ¼ç»Ÿä¸€ï¼ˆ100% Composition APIï¼‰
2. âœ… ç›®å½•ç»“æ„æ¸…æ™°
3. âŒ ç»„ä»¶è¿‡å¤§ï¼ˆæœ€å¤§ 785 è¡Œï¼‰
4. âŒ ä»£ç é‡å¤ï¼ˆé‡å¤ç‡ ~15%ï¼‰
5. âŒ æ ·å¼å†…è”ï¼ˆ400+ è¡Œæ ·å¼åœ¨ç»„ä»¶ä¸­ï¼‰

é€šè¿‡æŒ‰ç…§æœ¬è®¡åˆ’é€æ­¥é‡æ„ï¼Œ**2-3 å‘¨åä»£ç è´¨é‡ä¼šæ˜¾è‘—æå‡**ï¼

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬æ–‡æ¡£ä¼šéšç€é‡æ„è¿›å±•æŒç»­æ›´æ–°
**æœ€åæ›´æ–°**ï¼š2026-02-08
**ä¸‹æ¬¡å®¡æŸ¥**ï¼šé‡æ„å®Œæˆå
